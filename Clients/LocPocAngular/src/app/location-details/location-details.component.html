<p-sidebar [(visible)]="isVisible" position="right" styleClass="ui-sidebar-lg" [blockScroll]="true" [showCloseIcon]="false">
    <p-scrollPanel [style]="{width: '100%', height: '100%'}">
            <div (click)="close()" class="close-button">
                <i class="pi pi-times"></i>
            </div>

            <div *ngIf="isAddNewMode">
                <div class="ui-g-12">
                    <div class="sidebar-title">Add a new location item
                        <button pButton type="button" label="Save" icon="pi pi-save" (click)="saveNewLocation()"
                            [disabled]="!canSaveLocation"></button>        
                    </div>
                </div>
            </div>
            <div *ngIf="!isAddNewMode">
                <div class="ui-g-12">
                    <div class="sidebar-title">Update location item
                        <button pButton type="button" label="Save" icon="pi pi-save" (click)="updateLocation()"
                            [disabled]="!canSaveLocation" style="margin:5px;"></button>
                        <button pButton type="button" label="Delete" icon="pi pi-trash" (click)="deleteLocation()"
                            [disabled]="false"></button>    
                    </div>
                </div>
            </div>

        <div *ngIf="location">
            <div class="ui-fluid">
                <div class="ui-g-12 ui-md-6">
                    <span class="ui-fluid">
                        <label>Name</label>
                        <input type="text" pInputText placeholder="Name of location" [(ngModel)]="location.name"
                            (change)="onInputChanged($event)" />
                    </span>
                </div>
                <div class="ui-g-12 ui-md-6">
                    <span class="ui-fluid">
                        <label>Description</label>
                        <input type="text" pInputText placeholder="Description of location"
                            [(ngModel)]="location.description" />
                    </span>
                </div>
            </div>
            <div class="ui-fluid">
                <div class="ui-g-12 ui-md-6">
                    <span class="ui-fluid">
                        <label>Latitude</label>
                        <input type="number" step="any" pInputText placeholder="Latitude"
                            [(ngModel)]="location.latitude" [app-number-range-validator]="latitudeRange"
                            #latitude="ngModel" (change)="onInputChanged($event)" />
                        <div *ngIf="latitude.dirty && latitude.errors" class="alert-error">
                            Latitude is not within the valid range (-90, 90)
                        </div>
                    </span>
                </div>
                <div class="ui-g-12 ui-md-6">
                    <span class="ui-fluid">
                        <label>Longitude</label>
                        <input type="number" step="any" pInputText placeholder="Longitude"
                            [(ngModel)]="location.longitude" [app-number-range-validator]="longitudeRange"
                            #longitude="ngModel" (change)="onInputChanged($event)" />
                        <div *ngIf="longitude.dirty && longitude.errors" class="alert-error">
                            Longitude is not within the valid range (-180, 180)
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <app-map [location]="location"></app-map>
    </p-scrollPanel>

</p-sidebar>